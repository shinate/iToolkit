/**
 * iToolkit v1.0.0
 * Revised in 2015-010-22 010:12:52
 * Released under the ISC License.
 */

!function(t){"use strict";function e(t){var e=D(0),n=t.slice(e.length).match(/\s*(\S+?)\s*(?:,\s*(\S)+)?\s+in\s+(.+)/);return n?{key:n[1],pos:n[2],val:e+n[3]}:{val:t}}function n(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function i(t,i,a){p(t,"each");var o,s=t.outerHTML,l=t.parentNode,u=document.createComment("riot placeholder"),c=[],d=L(t);l.insertBefore(u,t),a=e(a),i.one("premount",function(){l.stub&&(l=i.root),t.parentNode.removeChild(t)}).on("update",function(){var e,p=H(a.val,i);if(!P(p)){if(e=o,o=p?JSON.stringify(p):"",o===e)return;p=p?Object.keys(p).map(function(t){return n(a,t,p[t])}):[]}for(var f=document.createDocumentFragment(),m=c.length,h=p.length;m>h;)c[--m].unmount();for(c.length=h,e=!o&&!!a.key,m=0;h>m;++m){var v=e?n(a,p[m],m):p[m];c[m]||((c[m]=new r({tmpl:s},{parent:i,isLoop:!0,root:l,item:v})).mount(),f.appendChild(c[m].root)),c[m]._item=v,c[m].update(v)}l.insertBefore(f,u),d&&(i.tags[g(t)]=c)}).one("updated",function(){var t=Object.keys(i);v(l,function(e){1!=e.nodeType||e.isLoop||e._looped||(e._visited=!1,e._looped=!0,k(e,i,t))})})}function a(t,e,n){v(t,function(t){if(1==t.nodeType){t.isLoop=t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var i=L(t);if(i&&!t.isLoop){for(var a,o=new r(i,{root:t,parent:e},t.innerHTML),s=g(t),l=e;!L(l.root)&&l.parent;)l=l.parent;o.parent=l,a=l.tags[s],a?(P(a)||(l.tags[s]=[a]),l.tags[s].push(o)):l.tags[s]=o,t.innerHTML="",n.push(o)}t.isLoop||k(t,e,[])}})}function o(t,e,n){function a(t,e,i){if(e.indexOf(D(0))>=0){var a={dom:t,expr:e};n.push(m(a,i))}}v(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&a(t,t.nodeValue),1==n){var o=t.getAttribute("each");return o&&o.match(/\{[\s\S]+\}/)?(i(t,e,o),!1):(c(t.attributes,function(e){var n=e.name,i=n.split("__")[1];return a(t,e.value,{attr:i||n,bool:i}),i?(p(t,n),!1):void 0}),L(t)?!1:void 0)}})}function r(t,e,n){function i(){c(N.attributes,function(t){d[t.name]=H(t.value,g||l)}),c(Object.keys(L),function(t){d[t]=H(L[t],g||l)})}function r(t){if(c(k,function(e){e[t?"mount":"unmount"]()}),g){var e=t?"on":"off";v?g[e]("unmount",l.unmount):g[e]("update",l.update)[e]("unmount",l.unmount)}}var s,l=M.observable(this),d=T(e.opts)||{},p=h(t.tmpl),g=e.parent,v=e.isLoop,y=e.item,C=[],k=[],N=e.root,x=t.fn,E=N.tagName.toLowerCase(),L={},S=/([\w\-]+)\s?=\s?['"]([^'"]+)["']/gim;if(x&&N._tag&&N._tag.unmount(!0),this.isMounted=!1,t.attrs){var A=t.attrs.match(S);c(A,function(t){var e=t.split(/\s?=\s?/);N.setAttribute(e[0],e[1].replace(/['"]/g,""))})}N._tag=this,this._id=f(~~((new Date).getTime()*Math.random())),m(this,{parent:g,root:N,opts:d,tags:{}},y),c(N.attributes,function(t){var e=t.value;D(/\{.*\}/).test(e)&&(L[t.name]=e)}),p.innerHTML&&!/select|select|optgroup|tbody|tr/.test(E)&&("TABLE-VIEW"!==N.tagName,p.innerHTML=w(p.innerHTML,n)),this.update=function(t){m(l,t),i(),l.trigger("update",t),u(C,l,t),l.trigger("updated")},this.mixin=function(){c(arguments,function(t){t="string"==typeof t?M.mixin(t):t,c(Object.keys(t),function(e){"init"!=e&&(l[e]="function"==typeof t[e]?t[e].bind(l):t[e])}),t.init&&t.init.bind(l)()})},this.mount=function(){if(i(),x&&x.call(l,d),r(!0),o(p,l,C),l.parent||l.update(),l.trigger("premount"),v)l.root=N=s=p.firstChild;else{for(;p.firstChild;)N.appendChild(p.firstChild);N.stub&&(l.root=N=g.root)}!l.parent||l.parent.isMounted?(l.isMounted=!0,l.trigger("mount")):l.parent.one("mount",function(){b(l.root)||(l.parent.isMounted=l.isMounted=!0,l.trigger("mount"))})},this.unmount=function(t){var e=s||N,n=e.parentNode;if(n){if(g)P(g.tags[E])?c(g.tags[E],function(t,e){t._id==l._id&&g.tags[E].splice(e,1)}):g.tags[E]=void 0;else for(;e.firstChild;)e.removeChild(e.firstChild);t||n.removeChild(e)}l.trigger("unmount"),r(),l.off("*"),N._tag=null},a(p,this,k)}function s(e,n,i,a,o){i[e]=function(e){e=e||t.event,e.which||(e.which=e.charCode||e.keyCode),e.target||(e.target=e.srcElement);try{e.currentTarget=i}catch(r){}if(e.item=a._item?a._item:o,n.call(a,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),!e.preventUpdate){var s=o?a.parent:a;s.update()}}}function l(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function u(t,e,n){c(t,function(t,i){var a=t.dom,o=t.attr,r=H(t.expr,e),u=t.dom.parentNode;if(null==r&&(r=""),u&&"TEXTAREA"==u.tagName&&(r=r.replace(/riot-/g,"")),t.value!==r){if(t.value=r,!o)return a.nodeValue=r.toString();if(p(a,o),"function"==typeof r)s(o,r,a,e,n);else if("if"==o){var c=t.stub;r?c&&(l(c.parentNode,c,a),a.inStub=!1,b(a)||v(a,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(c=t.stub=c||document.createTextNode(""),l(a.parentNode,a,c),a.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(r=!r),a.style.display=r?"":"none";else if("value"==o)a.value=r;else if("riot-"==o.slice(0,5)&&"riot-tag"!=o)o=o.slice(5),r?a.setAttribute(o,r):p(a,o);else{if(t.bool){if(a[o]=r,!r)return;r=o}"object"!=typeof r&&a.setAttribute(o,r)}}})}function c(t,e){for(var n,i=0,a=(t||[]).length;a>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function d(t){return"function"==typeof t||!1}function p(t,e){t.removeAttribute(e)}function f(t){return(t^t>>31)-(t>>31)}function g(t){var e=L(t),n=t.getAttribute("name"),i=n&&n.indexOf(D(0))<0?n:e.name;return i}function m(t){for(var e,n=arguments,i=1;i<n.length;++i)if(e=n[i])for(var a in e)t[a]=e[a];return t}function h(t){var e=I&&10>I,n=/^\s*<([\w-]+)/.exec(t),i=n?n[1].toLowerCase():"",a="th"===i||"td"===i?"tr":"tr"===i?"tbody":"div",o=y(a);return o.stub=!0,e&&("optgroup"===i?E(o,t):"option"===i?x(o,t):"div"!==a?N(o,t,i):e=0),e||(o.innerHTML=t),o}function v(t,e){if(t)if(e(t)===!1)v(t.nextSibling,e);else for(t=t.firstChild;t;)v(t,e),t=t.nextSibling}function b(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function y(t){return document.createElement(t)}function w(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gim,e||"")}function C(t,e){return(e||document).querySelectorAll(t)}function T(t){function e(){}return e.prototype=t,new e}function k(t,e,n){c(t.attributes,function(i){if(!t._visited&&("id"===i.name||"name"===i.name)){t._visited=!0;var a,o=i.value;if(~n.indexOf(o))return;a=e[o],a?P(a)?a.push(t):e[o]=[a,t]:e[o]=t}})}function N(t,e,n){var i,a=y("div"),o=/td|th/.test(n)?3:2;for(a.innerHTML="<table>"+e+"</table>",i=a.firstChild;o--;)i=i.firstChild;t.appendChild(i)}function x(t,e){var n=y("option"),i=/value=[\"'](.+?)[\"']/,a=/selected=[\"'](.+?)[\"']/,o=/each=[\"'](.+?)[\"']/,r=/if=[\"'](.+?)[\"']/,s=/>([^<]*)</,l=e.match(i),u=e.match(a),c=e.match(s),d=e.match(o),p=e.match(r);c?n.innerHTML=c[1]:n.innerHTML=e,l&&(n.value=l[1]),u&&n.setAttribute("riot-selected",u[1]),d&&n.setAttribute("each",d[1]),p&&n.setAttribute("if",p[1]),t.appendChild(n)}function E(t,e){var n=y("optgroup"),i=/label=[\"'](.+?)[\"']/,a=/^<([^>]*)>/,o=/^<([^ \>]*)/,r=e.match(i),s=e.match(a),l=e.match(o),u=e;if(s){var c=e.slice(s[1].length+2,-l[1].length-3).trim();u=c}if(r&&n.setAttribute("riot-label",r[1]),u){var d=y("div");x(d,u),n.appendChild(d.firstChild)}t.appendChild(n)}function L(t){return $[t.getAttribute(V)||t.tagName.toLowerCase()]}function S(t){if(j=j||y("style"),document.head){if(j.styleSheet?j.styleSheet.cssText+=t:j.innerHTML+=t,!j._rendered)if(j.styleSheet)document.body.appendChild(j);else{var e=C("style[type=riot]")[0];e?(e.parentNode.insertBefore(j,e),e.parentNode.removeChild(e)):document.head.appendChild(j)}j._rendered=!0}}function A(t,e,n){var i=$[e],a=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",i&&t&&(i=new r(i,{root:t,opts:n},a)),i&&i.mount?(i.mount(),W.push(i),i.on("unmount",function(){W.splice(W.indexOf(i),1)})):void 0}var M={version:"v2.2.1",settings:{}},_="string",O="object",P=Array.isArray||function(){var t=Object.prototype.toString;return function(e){return"[object Array]"===t.call(e)}}(),I=function(t){return 0|(t&&t.document||{}).documentMode}(t);M.observable=function(t){t=t||{};var e={},n=0;return t.on=function(i,a){return d(a)&&(a._id="undefined"==typeof a._id?n++:a._id,i.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(a),a.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,a=e[t],o=0;n=a&&a[o];++o)n._id==i._id&&(a.splice(o,1),o--);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,a=[].slice.call(arguments,1),o=e[n]||[],r=0;i=o[r];++r)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(a):a),o[r]!==i&&r--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(a)),t},t},M.mixin=function(){var t={};return function(e,n){return n?void(t[e]=n):t[e]}}(),function(t,e,n){function i(){return s.href.split("#")[1]||""}function a(t){return t.split("/")}function o(t){t.type&&(t=i()),t!=r&&(l.trigger.apply(null,["H"].concat(a(t))),r=t)}if(n){var r,s=n.location,l=t.observable(),u=n,c=!1,d=t.route=function(t){t[0]?(s.hash=t,o(t)):l.on("H",t)};d.exec=function(t){t.apply(null,a(i()))},d.parser=function(t){a=t},d.stop=function(){c&&(u.removeEventListener?u.removeEventListener(e,o,!1):u.detachEvent("on"+e,o),l.off("*"),c=!1)},d.start=function(){c||(u.addEventListener?u.addEventListener(e,o,!1):u.attachEvent("on"+e,o),c=!0)},d.start()}}(M,"hashchange",t);var j,D=function(t){var e,n,i,a=/[{}]/g;return function(o){var r=M.settings.brackets||t;return e!==r&&(e=r,i=r.split(" "),n=i.map(function(t){return t.replace(/(?=.)/g,"\\")})),o instanceof RegExp?r===t?o:new RegExp(o.source.replace(a,function(t){return n[~~("}"===t)]}),o.global?"g":""):i[o]}}("{ }"),H=function(){function e(t,e){return t=(t||D(0)+D(1)).replace(D(/\\{/g),"￰").replace(D(/\\}/g),"￱"),e=a(t,o(t,D(/{/),D(/}/))),new Function("d","return "+(e[0]||e[2]||e[3]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1])).replace(/\uFFF0/g,D(0)).replace(/\uFFF1/g,D(1))+";")}function n(t,e){return t=t.replace(/\n/g," ").replace(D(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+o(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':i(t,e)}function i(e,n){return e=e.trim(),e?"(function(v){try{v="+(e.replace(s,function(e,n,i){return i?"(d."+i+"===undefined?"+("undefined"==typeof t?"global.":"window.")+i+":d."+i+")":e})||"x")+"}catch(e){}finally{return "+(n===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function a(t,e){var n=[];return e.map(function(e,i){i=t.indexOf(e),n.push(t.slice(0,i),e),t=t.slice(i+e.length)}),n.concat(t)}function o(t,e,n){var i,a=0,o=[],r=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(r,function(e,n,r,s){!a&&n&&(i=s),a+=n?1:-1,a||null==r||o.push(t.slice(i,s+r.length))}),o}var r={},s=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(r[t]=r[t]||e(t))(n)}}(),W=[],$={},V="riot-tag";M.tag=function(t,e,n,i,a){return d(i)&&(a=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(d(n)?a=n:S(n)),$[t]={name:t,tmpl:e,attrs:i,fn:a},t},M.mount=function(t,e,n){function i(t){var e="";return c(t,function(t){e+=', *[riot-tag="'+t.trim()+'"]'}),e}function a(){var t=Object.keys($);return t+i(t)}function o(t){if(t.tagName){e&&!t.getAttribute(V)&&t.setAttribute(V,e);var i=A(t,e||t.getAttribute(V)||t.tagName.toLowerCase(),n);i&&l.push(i)}else t.length&&c(t,o)}var r,s,l=[];if(typeof e===O&&(n=e,e=0),typeof t===_?("*"===t?t=s=a():t+=i(t.split(",")),r=C(t)):r=t,"*"===e){if(e=s||a(),r.tagName)r=C(e,r);else{var u=[];c(r,function(t){u.push(C(e,t))}),r=u}e=0}return r.tagName?o(r):c(r,o),l},M.update=function(){return c(W,function(t){t.update()})},M.mountTo=M.mount,M.util={brackets:D,tmpl:H},"object"==typeof exports?module.exports=M:"function"==typeof define&&define.amd?define(function(){return M}):t.riot=M}("undefined"!=typeof window?window:void 0);var utils={httpGet:function(t,e,n,i){var a=new XMLHttpRequest,t=utils.concatParams(t,e);a.open("GET",t,!0),a.send(null),a.onreadystatechange=function(){if(4===a.readyState&&(i&&"function"==typeof i&&i(),200===a.status)){var t=a.responseText;try{if("string"==typeof t)var e=JSON.parse(t);else var e=t}catch(o){alert("解析错误")}n(e)}}},httpPost:function(t,e,n,i){var a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/json"),a.send(e),a.onreadystatechange=function(){if(4===a.readyState)if(i&&"function"==typeof i&&i(),200===a.status){try{var t=JSON.parse(a.responseText)}catch(e){console.log("解析错误")}n(t)}else console.log("网络错误")}},jsonp:function(t,e,n){var i=Date.now(),a=document.createElement("script"),o=document.getElementsByTagName("head")[0],t=utils.concatParams(t,e);if(e.callback)var r=t,s=e.callback;else{if(t.match(/\?/))var r=t+"&callback=jsonpCallback"+i;else var r=t+"?callback=jsonpCallback"+i;var s="jsonpCallback"+i}a.src=r,o.appendChild(a),window[s]=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}n(t)},a.onerror=function(){console.log("jsonp error")},a.onload=function(){o.removeChild(a)}},htmlEncode:function(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText},concatParams:function(t,e){if(t.match(/\?/))var n="&";else var n="?";for(i in e)n=n+i+"="+e[i]+"&";return n=n.replace(/&$/,""),t+n},setCookie:function(t,e,n,i){var a=new Date,i=i||"/";a.setTime(a.getTime()+n),document.cookie=t+"="+escape(e)+";path="+i+";expires="+a.toGMTString()},transBytes:function(t){var e=["B","KB","MB","GB","TB"];if(0==t)return"n/a";var n=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return 0==n?t+e[n]:(t/Math.pow(1024,n)).toFixed(1)+e[n]},transTimes:function(t){var t=parseInt(t,10),e=new Date(1e3*t),n=(new Date).getTime()/1e3,i=n-t;if(86400>i)return e.getHours()+":"+e.getMinutes();if(i>86400&&172800>i)return"昨天";if(i>172800){var a=(e.getFullYear()+"-").substring(2),o=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",r=e.getDate()<10?"0"+e.getDate():e.getDate();return a+o+r}},hasClass:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){t.className.trim(),this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}},toggleClass:function(t,e){if(utils.hasClass(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}else t.className+=" "+e},insertAfter:function(t,e){var n=e.parentNode;n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)},insertAfterText:function(t,e){var n=e.parentNode;if(n.lastChild==e)n.appendChild(t);else{var i=e.nextSibling;3===i.nodeType&&(i=i.nextSibling),n.insertBefore(t,i)}},isType:function(t){return function(e){return toString.call(e)==="[object "+t+"]"}},makeArray:function(){return Array.prototype.concat(obj)},extend:function(t,e){for(var n in e)t[n]||(t[n]=e[n])}};utils.extend(utils,{isArray:utils.isType("Array"),isObject:utils.isType("Object"),isFunction:utils.isType("Function"),isElement:function(t){return-1!==toString.call(t).indexOf("Element")}}),utils.extend(utils,{jsLoader:function(){function t(){return p++}function e(t){return t.match(/\.css\??/)}function n(e){this.uri=e,this.cid=t(),this.status=w}function i(t,e){return i.then(t,e).start(),i}function a(t){throw t}function o(t){if(t||f.length)for(var e=0;e<t.task.length;e++){var n=t.task[e];s(n,t)}}function r(t,e){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t.uri,c.appendChild(i),i=null,t.status=v,n.resolve.call(e)}function s(t,i){function a(e){if("error"===e.type&&(t.status=y),"load"===e.type&&(t.status=v),n.resolve.call(i,t),t.changeStatus){t.changeStatus=!1;for(var a=0;a<C[t.cid].length;a++){var o=C[t.cid][a];n.resolve.call(o.resolver,o.js)}C[t.cid]=null}s.onload=s.onerror=null,c.removeChild(s),s=null}if(m(t.uri))try{t.uri(),t.status=v,n.resolve.call(i)}catch(o){t.status=y,n.resolve.call(i)}else{if(t.status===v)return void n.resolve.call(i);if(e(t.uri))return void r(t,i);if(t.status===b)return t.changeStatus=!0,C[t.cid]=C[t.cid]||[],void C[t.cid].push({js:t,resolver:i});t.status=b;var s=document.createElement("script");s.async=!0,s.src=t.uri,s.onload=s.onerror=a,c.appendChild(s)}}function l(t){var e=u(t);return e?n.get(e):n.get(t)}function u(t){return i.alias[t]}var c=document.head||document.getElementsByTagName("head")[0],d={},p=0,f=[],g=utils.isArray,m=utils.isFunction,h=utils.makeArray,v="done",b="inprocess",y="rejected",w="pending",C={};return n.get=function(t){return d[t]||(d[t]=new n(t))},n.resolve=function(t){var e=this;if(e.status++,t&&t.status===y){var n=Error("Source: "+t.uri+" load failed");a(n)}e.status===e.task.length&&setTimeout(function(){e.callback&&e.callback(),e=null,o(f.shift())},7)},i.then=function(t,e){if(!t)return i;g(t)||(t=h(t));for(var n={task:[],callback:e,status:0},a=0;a<t.length;a++)n.task.push(l(t[a]));return f.push(n),i},i.start=function(){return o(f.shift()),i},i.alias={},i}()});var EventCtrl=EC=riot.observable(),iToolkit={};iToolkit.methodRegister=function(t,e){for(var n in iToolkit)if(t===n)return;iToolkit[t]=e},iToolkit.tableExtend={},riot.tag("date-picker","<yield>",function(t){var e=this,n=e.root,i=e.opts.opts||e.opts,a=document.scripts,o="",r="";if(i.path)o=i.path;else{for(var s=0;s<a.length;s++)if(a[s].src&&/iToolkit_pc.min.js|iToolkit_pc.js/.test(a[s].src)){r=a[s].src.replace(/iToolkit_pc.min.js|iToolkit_pc.js/,"");break}o=r+"plugins/laydate/"}var l=i.theme?i.theme:"default";utils.jsLoader([o+"laydate.min.js",o+"/need/laydate.css",o+"/skins/"+l+"/laydate.css"],function(){for(var t=0;t<n.children.length;t++){var i=n.children[t];i.attributes.pTrigger&&(e.pTrigger=i),i.attributes.media&&(e.media=i)}e.resolve(),e.update()}),this.resolve=function(){if(!e.pTrigger&&!e.media)throw"media and pTrigger property was not found in the element";return e.pTrigger===e.media&&(i.elem=i.pTrigger=e.media),"undefined"==typeof e.pTrigger&&(i.elem=e.media),e.pTrigger&&e.media&&e.pTrigger!==e.media&&(i.pTrigger=e.pTrigger,i.elem=e.media),e.pTrigger&&!e.media&&(i.elem=e.pTrigger,i.justChoose=!0),i.pTrigger?void(i.pTrigger.onclick=function(t){laydate(i)}):void laydate(i)}.bind(this)}),riot.tag("dropdown",'<yield> <div class="r-dropdown">{ title }</div> <ul class="r-downdown-menu"> <li class="r-dropdown-list" each="{ data }"><a href="{ link|\'javascript:void(0)\' }">{ name }</a></li> </ul>',function(t){var e=this;e.root,e.opts.opts||e.opts}),riot.tag("editable-link",'<a href="javascript:void(0);" if="{ !editable }" onclick="{ open }">{ value }</a> <super-form if="{ editable }" action="{ action }" opts="{ formOpts }"> <input type="text" value="{ parent.value }" name="{ parent.name }" class="editable-link-input"> <input type="submit" value="提交"> <button onclick="{ parent.close }">取消</button> </super-form>',function(t){var e=this;e.editlink=!1;var n=e.root,i=e.opts.opts||e.opts;e.on("mount",function(){e.action=n.getAttribute("action"),e.value=n.getAttribute("text"),e.name=n.getAttribute("name"),e.update()}),this.open=function(t){e.editable=!0,e.update()}.bind(this),this.close=function(t){e.editable=!1,e.update()}.bind(this),e.formOpts={errCallback:function(){i.errCallback(),n.querySelector(".editable-link-input").value=e.value,e.editable=!1,e.update()},callback:function(t){i.callback(),e.value=n.querySelector(".editable-link-input").value,e.editable=!1,e.update()}}}),riot.tag("goto-top",'<div class="itoolkit-goto-top" show="{ showGotoTop }" onclick="{ gotoTop }"> <yield> <span class="itoolkit-goto-top-icon" show="{ showDefault }"><span class="icon-arrowUp"></span></span> </div>',"goto-top .itoolkit-goto-top{ display: block; position: fixed; bottom: 50px; right: 40px; height: 60px; width: 60px; z-index: 10000; text-align: center; opicity: 0.5; cursor: pointer; } goto-top .itoolkit-goto-top .itoolkit-goto-top-icon{ font-size: 3em; margin: auto; float: none; }",function(t){var e=this;e.config=e.opts.opts||e.opts;var n=window.screen.availHeight,i=e.root;e.on("mount",function(){e.root.querySelector(".itoolkit-goto-top").style.bottom=e.config.bottom,e.root.querySelector(".itoolkit-goto-top").style.right=e.config.right,"itoolkit-goto-top-icon"===i.querySelector(".itoolkit-goto-top").firstElementChild.className&&(e.showDefault=!0),window.addEventListener("scroll",e.controlGotoTop)}),e.controlGotoTop=function(){var t=document.body;t.scrollTop>n&&!e.showGotoTop?(e.showGotoTop=!0,e.update()):t.scrollTop<n&&e.showGotoTop&&(e.showGotoTop=!1,e.update())},this.gotoTop=function(t){var e=document.body.scrollTop/100*16,n=setInterval(function(){document.body.scrollTop=document.body.scrollTop-e,document.body.scrollTop<10&&clearInterval(n)},16)}.bind(this)}),riot.tag("loading",'<div class="{itoolkit-loading: true, default: default}" > <yield> </div>',"loading .itoolkit-loading { text-align: center; }",function(t){var e=this;e.opts.opts||e.opts;e["default"]=!0,e.on("mount",function(){var t=e.root.parentNode,n=window.getComputedStyle(t,null).position;"static"===n&&(t.style.position="relative"),e.childDom=e.root.getElementsByClassName("itoolkit-loading")[0],e.childDom.innerHTML.trim()&&(e["default"]=!1,e.update());var i=parseInt(window.getComputedStyle(e.childDom,null).height.replace("px",""),10);e.root.style.marginTop="-"+i/2+"px"}),e.root.show=function(){e.childDom&&(e.childDom.style.display="block")},e.root.hide=function(){e.childDom&&(e.childDom.style.display="none")}}),riot.tag("modal",'<div class="itoolkit-modal-dialog" riot-style="width:{width}; height:{height}"> <div class="itoolkit-modal-title"> <span>{ title }</span> <div class="itoolkit-modal-close-wrap" onclick="{ close }"> <div class="itoolkit-modal-close"></div> </div> </div> <div class="itoolkit-modal-container"> <yield> </div> </div>',function(t){var e=this,n=e.opts.opts||e.opts;e.root;for(i in n)e[i]=n[i];e.width=n.width||600,e.height=n.height||"auto",e.on("mount",function(){var t=e.root.querySelector(".itoolkit-modal-container"),i=e.root.querySelector(".itoolkit-modal-title"),a=parseInt(window.getComputedStyle(i,null).height.replace("px",""));n.height&&(t.style.height=e.height-a-2+"px")}),this.close=function(t){e.root.style.display="none",e.onClose&&e.onClose()}.bind(this),document.querySelector("[modal-open-target='"+e.root.id+"']")&&(document.querySelector("[modal-open-target='"+e.root.id+"']").onclick=function(){e.root.style.display="block",e.onOpen&&e.onOpen()}),e.root.open=function(){e.root.style.display="block",e.onOpen&&e.onOpen()},e.root.close=function(){e.root.style.display="none",e.onClose&&e.onClose()},e.root.loadData=function(t,n){n=n||"data",e[n]=t,e.update()}}),riot.tag("paginate",'<div onselectstart="return false" ondragstart="return false"> <div class="paginate"> <li onclick="{ goFirst }">«</li> <li onclick="{ goPrev }">‹</li> </div> <ul class="paginate"> <li each="{ pages }" onclick="{ parent.changePage }" class="{ active: parent.currentPage == page }">{ page }</li> </ul> <div class="paginate"> <li onclick="{ goNext }">›</li> <li onclick="{ goLast }">»</li> </div> <div class="paginate"> <form onsubmit="{ redirect }" style="position:relative;"> <span class="redirect" if="{ redirect }">跳转到<input class="jumpPage" name="page" riot-type={"number"} style="width: 40px;">页 </span> <div class="paginate-tips" riot-style="top: { tipsTop }; left: { tipsLeft }; display: { showTip }"> 请输入1～{ pageCount }之间的数字 </div> <span class="page-sum" if="{ showPageCount }"> 共<em>{ pageCount }</em>页 </span> <span class="item-sum" if="{ showItemCount }"> <em>{ count }</em>条 </span> <input type="submit" style="display: none;"> </form> </div> </div>','.paginate .paginate-tips{ position: absolute; padding: 5px; border: 1px solid #ddd; background-color: #fff; -webkit-box-shadow: 0 0 10px #ccc; box-shadow: 0 0 10px #ccc; } .paginate .paginate-tips:before { content: ""; position: absolute; width: 0; height: 0; top: -16px; left: 10px; border: 8px solid transparent; border-bottom-color: #ddd; } .paginate .paginate-tips:after { content: ""; position: absolute; width: 0; height: 0; top: -15px; left: 10px; border: 8px solid transparent; border-bottom-color: #fff; }',function(t){var e=this,n=e.root,a=e.opts.opts||e.opts;if(e.showTip="none",e.count=a.count||0,e.pagesize=a.pagesize||20,e.pageCount=a.pageCount||Math.ceil(e.count/e.pagesize)||1,e.currentPage=a.currentPage||1,e.url=a.url||"",e.showNumber=a.showNumber||5,e.redirect=a.redirect||!0,e.showPageCount=a.showPageCount||!0,e.showItemCount=a.showItemCount||!0,e.needInit=a.needInit||!1,e.updateCurrentPage=function(){if(e.currentPage>Math.ceil(e.showNumber/2)&&e.pageCount>e.showNumber){if(e.pages=[],e.pageCount-e.currentPage>2)var t=e.currentPage-Math.ceil(e.showNumber/2),n=e.currentPage+Math.floor(e.showNumber/2);else var n=e.pageCount,t=e.pageCount-e.showNumber;for(i=t;i<n;i++)e.pages.push({page:i+1}),e.update()}else if(e.currentPage<Math.ceil(e.showNumber/2)+1&&e.pageCount>e.showNumber){for(e.pages=[],i=0;i<e.showNumber;i++)e.pages.push({page:i+1});e.pages.push({page:"..."})}},n.addCount=function(t){var n=e.count+t,i=e.pageCount;if(0>n?e.count=0:e.count=n,e.pageCount=Math.ceil(e.count/e.pagesize)||1,e.currentPage=e.currentPage>e.pageCount?e.pageCount:e.currentPage,e.pageCount<=e.showNumber){e.pages=[];for(var o=0;o<e.pageCount;o++)e.pages.push({page:o+1})}(e.needInit||e.pageCount<i&&e.currentPage<=e.pageCount)&&a.callback(e.currentPage),e.pageChange(e.currentPage),e.update()},e.pages=[],e.pageCount<e.showNumber+1)for(i=0;i<e.pageCount;i++)e.pages.push({page:i+1});else{for(i=0;i<e.showNumber;i++)e.pages.push({page:i+1});e.pages.push({page:"..."})}e.needInit&&a.callback(e.currentPage),e.updateCurrentPage(),e.update(),this.goFirst=function(t){e.pageChange(1)}.bind(this),this.goPrev=function(t){e.currentPage>1&&e.pageChange(e.currentPage-1)}.bind(this),this.goNext=function(t){e.currentPage<e.pageCount&&e.pageChange(e.currentPage+1)}.bind(this),this.goLast=function(t){e.pageChange(e.pageCount)}.bind(this),this.redirect=function(t){var n=parseInt(e.page.value,10);n&&n<e.pageCount+1&&n>0?e.pageChange(parseInt(n,10)):(e.tipsLeft=e.page.offsetLeft,e.tipsTop=e.page.offsetTop+e.page.offsetHeight+8,e.showTip="block",setTimeout(function(){e.showTip="none",e.update()},1500),e.update())}.bind(this),this.changePage=function(t){var n=t.item.page;return"string"==typeof n?!1:void e.pageChange(n)}.bind(this),e.pageChange=function(t){e.currentPage!=t&&(e.currentPage=t,a.callback(t)),e.updateCurrentPage()}}),riot.tag("select-box",'<div class="r-select" onclick="{ clicked }">{ placeholder }</div> <ul class="r-select-body" hide="{ hide }"> <li each="{ data }" index="{ index }" value="{ value }" class="r-select-item { selected }" onclick="{ parent.clickItem }">{ innerText }</li> </ul> <div style="display:none" class="inputHide"></div>',function(t){var e=this,n=e.root;e.config=e.opts.opts||e.opts,e.data=[],e.placeholder=e.config.placeholder,e.callback=e.config.callback,e.name=e.config.name,e.value=[],e.prevNode=null,n.getValue=function(){return e.value},e.hide=!0,this.clicked=function(t){e.hide=!1,e.update()}.bind(this),this.updateValue=function(t){for(var n=0;n<e.data.length;n++)e.data[n].selected&&(e.value.push(e.data[n].value),e.placeholder.push(e.data[n].innerText));e.value.length==e.size&&(e.hide=!0),e.placeholder=e.placeholder.join(","),e.prevNode=t,e.callback&&e.callback(e),e.update()}.bind(this),this.clickItem=function(t){var n=t.target||t.srcElement,i=+n.getAttribute("index");return e.value.length=0,e.placeholder=[],e.mutiple?(e.data[i].selected=e.data[i].selected?"":"selected",void e.updateValue(null)):(e.prevNode&&(e.data[+e.prevNode.getAttribute("index")].selected=""),e.data[i].selected="selected",void e.updateValue(n))}.bind(this),e.one("mount",function(){for(var t=0;t<e.config.data.length;t++){var n=e.config.data[t];n.selected="",n.index=t,e.data.push(n)}e.mutiple=e.config.mutiple||!1,e.size=e.mutiple?e.config.size?e.config.size:e.data.length:1,e.update()})}),riot.tag("side-list",'<ul > <li each="{ data }"> <img riot-src="{ logoUrl }" if="{ isLogo }"> <span>{ name }</span> </li> </ul>',function(t){}),riot.tag("slide","",function(t){}),riot.tag("super-div","<yield>","super-div{ display: block; }",function(t){var e=this,n=e.opts.opts||e.opts,a=e.root;for(i in n)e[i]=n[i];e.getData=function(t){var t=t||{};if(a.getAttribute("data-get"))var n="httpGet";else if(a.getAttribute("data-jsonp"))var n="jsonp";utils[n](e.superDivUrl,t,function(t){for(i in t)e.data={},e.data[i]=t[i];e.update()})},e.on("mount",function(){a.style.display="block",e.superDivUrl=a.getAttribute("data-get")||a.getAttribute("data-jsonp"),e.superDivUrl&&e.getData(n.params)}),e.loadData=a.loadData=function(t,n){n=n||"data",e[n]=t,e.update()},e.reload=a.reload=function(){e.superDivUrl?e.getData(n.params):e.update()}}),riot.tag("super-form",'<form onsubmit="{ submit }" > <yield> </form>',function(t){function e(t){s([],this)}function n(t){return Object.prototype.toString.call(t).match(/\ (.*)\]/)[1]}function a(t){var e=n(t);return"Null"===e||"Undefined"===e||"Function"===e?t:new window[e](t)}function o(t){for(var t=t,e=t.attributes,n={},i=0;i<e.length;i++){var a=e[i];n[a.name]=a.value}return n.value=t.value,n}function r(t){for(var e=0;e<p.length;e++)if(t[p[e]])return!0;return!1}function s(t,e){var n=e,i=o(e);if(r(i)){var a=new l.Validation(t,i.name,n);if(i.name){if((i.allowEmpty||i.allowempty)&&""===i.value)return void l.onValidPass(n,l.successTips);l.validEmpty(a,i),i.valid?"present"===i.valid?l.validPresent(a,i):"mobile"===i.valid?l.validMobile(a,i):"url"===i.valid?l.validUrl(a,i):"email"===i.valid?l.validEmail(a,i):i.valid.match(/^\/\S+\/$/)?l.validRegExp(a,i):f[i.valid.toUpperCase()]&&l.validNumRange(a,i):i.valid||(i.customValid||i.customvalid?l.validCustom(a,i):(i.min||i.max)&&l.comparator("string").handler(a,i))}t.length||l.validUnion(a,t,n,i),a.validTip()}}var l=this,u=l.root,c=l.opts.opts||l.opts,d=["insertTip","ajaxSubmit","submit","removeTips","insertTip","removeTip","loadData","getData","setData"],p=["allowEmpty","allowempty","max","min","valid","customValid","customvalid","vr"],f={NON_NEGATIVE_INT:/^0$|^-[1-9]\d*$/,POSITIVE_INT:/^[1-9]\d*$/,NON_POSITIVE_INT:/^[1-9]\d*$|^0$/,NEGATIVE_INT:/^-[1-9]\d*$/,INT:/^-?[1-9]\d*$|^0$/,NON_NEGATIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$|^0$/,POSITIVE_FLOAT:/^(\d)(\.\d+)?$|^([1-9]\d*)(\.\d+)?$/,NON_POSITIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$|^0$/,NEGATIVE_FLOAT:/^(-\d)(\.\d+)?$|^(-[1-9]\d*)(\.\d+)?$/,FLOAT:/^(-?\d)(\.\d+)?$|^(-?[1-9]\d*)(\.\d+)?$|^0$/};l.presentWarning="必填",l.emailWarning="邮箱格式错误",l.mobileWarning="手机格式错误",l.urlWarning="网址格式错误",l.successTips=c.successTipsText||"通过",l.regWarning="字段不符合验证规则",l.numWarning="数字格式错误",l.passClass=c.passClass||"valid-pass",l.failedClass=c.failedClass||"valid-failed",l.comparator=function(t){return{handler:function(e,n){switch(t){case"number":return l.numComparator(e,n);case"string":default:return l.strCompatator(e,n)}}}},l.strCompatator=function(t,e){var n=parseInt(e.min,10),i=parseInt(e.max,10),a=isNaN(n),o=isNaN(i),r=e.value.length;return a||o?(!a&&n>r&&t.msg.push(l.minWarning(n)),!o&&r>i&&t.msg.push(l.maxWarning(i))):(r>i||n>r)&&t.msg.push(l.bpWarning(n,i)),t},l.numComparator=function(t,e){var n=parseInt(e.min,10),i=parseInt(e.max,10),a=isNaN(n),o=isNaN(i),r=+e.value;return a||o?(!a&&n>r&&t.msg.push(l.minNumWarning(n)),!o&&r>i&&t.msg.push(l.maxNumWarning(i))):(r>i||n>r)&&t.msg.push(l.numBpWarning(n,i)),t},l.one("mount",function(){if(u.style.display="block",c.realTime&&c.valid)for(var t=l.root.getElementsByTagName("form")[0].elements,n=0,i=t.length;i>n;n++){var a=t[n].type;("submit"!==a||"button"!==a)&&(t[n].addEventListener("input",e,!1),t[n].addEventListener("change",e,!1))}}),u.loadData=function(t,e){if(utils.isObject(t))for(var n in t)t[n]=a(t[n]);else t=a(t);e=e||"data",l[e]=t,l.update()},u.setData=function(t,e){l.data[e]=a(t),l.update()},l.checkExistKey=function(t,e,n){if(t.hasOwnProperty(e))if(utils.isArray(t[e]))t[e].push(n);else{var i=[];
i.push(t[e]),i.push(n),t[e]=i}else t[e]=n},l.getData=u.getData=function(){for(var t=l.root.getElementsByTagName("form")[0].elements,e={},n=0;n<t.length;n++)if(t[n].name){var i;if("SELECT"===t[n].tagName)for(var a=t[n].options,o=0;o<a.length;o++)a[o].selected&&(i=a[o].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i)));else"checkbox"===t[n].type||"radio"===t[n].type?t[n].checked&&(i=t[n].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i))):(i=t[n].value,l.checkExistKey(e,t[n].name,encodeURIComponent(i)))}return e};for(i in c)d.indexOf(i)<0&&(l[i]=c[i]);l.data=c.data,l.submitingText=c.submitingText||"提交中...",void 0===c.valid&&(c.valid=!0),l.maxWarning=c.maxWarning||function(t){return"不得超过"+t+"个字符"},l.minWarning=c.minWarning||function(t){return"不得小于"+t+"个字符"},l.bpWarning=c.bpWarning||function(t,e){return"只允许"+t+"-"+e+"个字符"},l.minNumWarning=c.minNumWarning||function(t){return"不得小于"+t},l.maxNumWarning=c.maxNumWarning||function(t){return"不得大于"+t},l.numBpWarning=c.numBpWarning||function(t,e){return"输入数字应在"+t+"-"+e+"之间"},l.removeTips=u.removeTips=function(){function t(){for(a=0;a<i.length;a++)i[a].parentNode.removeChild(i[a]),i.length&&t()}var e=l.root,n=e.getElementsByTagName("form")[0].elements,i=e.getElementsByClassName("tip-container");i&&i.length&&t();for(var a=0;a<n.length;a++)utils.removeClass(n[a],l.passClass),utils.removeClass(n[a],l.failedClass)},l.removeTipNode=function(t){var e=t.nextElementSibling;e&&e.className.match(/tip-container/)&&t.parentNode.removeChild(e)},l.removeTip=u.removeTip=function(t){l.removeTipNode(t),utils.removeClass(t,l.passClass),utils.removeClass(t,l.failedClass)},l.insertTip=u.insertTip=function(t,e,n){l.removeTipNode(t);var i=document.createElement("span");i.className=n,i.innerHTML=e,utils.insertAfterText(i,t)},l.onValidRefuse=u.onValidRefuse=c.onValidRefuse||function(t,e){l.insertTip(t,e,"tip-container"),utils.removeClass(t,l.passClass),utils.addClass(t,l.failedClass)},l.onValidPass=u.onValidPass=c.onValidPass||function(t,e){l.insertTip(t,e,"tip-container success"),utils.removeClass(t,l.failedClass),utils.addClass(t,l.passClass)},l.ajaxSubmit=function(t,e){for(var n="",i=0;i<t.length;i++){if(t[i].name){var a;if("SELECT"===t[i].tagName)for(var o=t[i].options,r=0;r<o.length;r++)o[r].selected&&(a=o[r].value,n+=t[i].name+"="+encodeURIComponent(a)+"&");else"checkbox"===t[i].type||"radio"===t[i].type?t[i].checked&&(a=t[i].value,n+=t[i].name+"="+encodeURIComponent(a)+"&"):(a=t[i].value,n+=t[i].name+"="+encodeURIComponent(a)+"&")}if("submit"===t[i].type){var s=t[i],u="BUTTON"===s.tagName?"innerHTML":"value",d=s[u];s.disabled="disabled",s[u]=l.submitingText}}var p=new XMLHttpRequest;p.open("POST",e,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.send(n),p.onreadystatechange=function(){if(4===p.readyState)if(l.removeTips(),s[u]=d,s.disabled=!1,c.complete&&"function"==typeof c.complete&&c.complete(),200===p.status)try{var t=JSON.parse(p.responseText);c.callback&&c.callback(t),EC.trigger("submit_success",t)}catch(e){throw new Error(e.message)}else c.errCallback&&c.errCallback(n),EC.trigger("submit_error",n)}},this.submit=function(t){var e=[],n=l.root.getElementsByTagName("form")[0].elements,i=l.action||l.root.getAttribute("action"),a=i;if(c.valid)for(var o=0;o<n.length;o++)s(e,n[o]);if(!e.length)try{c.beforeSubmit&&c.beforeSubmit(e)}catch(t){e.push(t)}return e.length?!1:c.normalSubmit?(l.root.firstChild.setAttribute("action",i),!0):(t.preventDefault(),void l.ajaxSubmit(n,a))}.bind(this),l.Validation=function(t,e,n){this.msg=[],this.validTip=function(){this.msg.length?(l.onValidRefuse(n,this.msg[0]),t.push(e)):c.forbidTips?l.removeTip(n):l.onValidPass(n,l.successTips)}},l.validEmail=function(t,e){return e.value.match(/^([a-zA-Z0-9_\-\.])+\@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/)?l.comparator("string").handler(t,e):t.msg.push(l.emailWarning),t},l.validUrl=function(t,e){return e.value.match(/((http|ftp|https|file):\/\/([\w\-]+\.)+[\w\-]+(\/[\w\u4e00-\u9fa5\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)/)?l.comparator("string").handler(t,e):t.msg.push(l.urlWarning),t},l.validMobile=function(t,e){return e.value.match(/^1[3|4|5|8][0-9]\d{4,8}$/)?l.comparator("string").handler(t,e):t.msg.push(l.mobileWarning),t},l.validPresent=function(t,e){var n=e.value.replace(" ","");return n.length?l.comparator("string").handler(t,e):t.msg.push(l.presentWarning),t},l.validRegExp=function(t,e){var n=e.valid.replace(/^\//,"");n=n.replace(/\/$/,"");var i=new RegExp(n);return i.test(e.value)?l.comparator("string").handler(t,e):t.msg.push(l.regWarning),t},l.validNumRange=function(t,e){var n=f[e.valid.toUpperCase()];return n.test(e.value)?l.comparator("number").handler(t,e):t.msg.push(l.numWarning),t},l.validCustom=function(t,e){var n=e.customValid||e.customvalid;if(window[n]){var i=window[n].regExp,a=window[n].message||l.regWarning;i&&i.test(e.value)?l.comparator("string").handler(t,e):t.msg.push(a)}return t},l.validUnion=function(t,e,n,i){if(i.vr){var a=i.vr.split("::"),o=a[0],r=a[1]?a[1].split(","):void 0,s=!1;try{s=iToolkit[o].apply(n,r)}catch(l){throw s=!1,l}s||t.msg.push("")}return t},l.validEmpty=function(t,e){return""===e.value&&t.msg.push(l.presentWarning),t}}),riot.tag("tab",'<ul> <li each="{ data }" onclick="{ parent.toggle }" class="{ active: parent.currentIndex==index }">{ title }</li> </ul> <div class="tab-content"> { content } </div>',function(t){var e=this,n=e.opts.opts||e.opts;if(e.data=n.data,e.data.length>0)for(e.currentIndex=0,e.content=e.data[0].content,i=0;i<e.data.length;i++)e.data[i].index=i;this.toggle=function(t){e.content=t.item.content,e.currentIndex=t.item.index,e.update()}.bind(this)}),riot.tag("table-view",'<yield> <table class="{ config.class }"> <tr show="{ showHeader }"> <th each="{ cols }" riot-style="{ style }" hide="{ hide }">{ alias || name }</th> </tr> <tr each="{ row in rows }" > <td each="{ colkey, colval in parent.cols }" class="{ newline: parent.parent.config.newline, cut: parent.parent.config.cut }" title="{ parent.row[colkey.name] }" hide="{ colkey.hide }"> { parent.parent.drawcell(parent.row, this, colkey) } </td> </tr> </table>',function(t){var e=this,n=e.root;e.config=e.opts.opts||e.opts,e.config.showHeader===!1?e.showHeader=!1:e.showHeader=!0,e.cols=[],e.rows=[],e.on("mount",function(){if(e.rows=e.config.data,n.children.length>1)for(i=0;i<n.children.length;i++){var t=n.children[i];if("rcol"===t.localName){var a="";void 0!=t.attributes.width&&(a="width: "+t.attributes.width.value);var o={inner:t.innerHTML,style:a,index:i,attrs:t.attributes,hide:!1};o.name=t.attributes.name?t.attributes.name.value:"",t.attributes.alias&&(o.alias=t.attributes.alias.value||""),e.cols.push(o)}}else for(i in e.rows[0]){var o={name:i,inner:"",style:a};e.cols.push(o)}e.update()}),e.compare=function(t,n){return t[e.orderkeyName]>n[e.orderkeyName]?1:t[e.orderkeyName]===n[e.orderkeyName]?0:-1},e.clearOrder=function(){e.ordered=!1,e.reversed=!1},n.loadData=function(t){e.clearOrder(),e.rows=t,e.update()},n.appendData=function(t){e.clearOrder(),e.rows.push(t),e.update()},n.clearData=function(t){e.clearOrder(),e.rows=[],e.update()},n.orderData=function(t){e.orderkeyName=t,e.ordered!==t&&(e.reversed!==t?e.rows=e.rows.sort(e.compare):e.rows=e.rows.reverse(),e.ordered=t,e.reversed=!1,e.update())},n.reverseData=function(t){e.orderkeyName=t,e.reversed!==t&&(e.ordered!==t&&(e.rows=e.rows.sort(e.compare)),e.rows=e.rows.reverse(),e.ordered=!1,e.reversed=t,e.update())},n.deleteData=function(t,a){e.clearOrder();var t=t||"id";for(i=0;i<e.rows.length;i++)e.rows[i][t]===a&&(e.rows.splice(i,1),n.deleteData(t,a));return e.update(),n},n.hide=function(t){for(i=0;i<e.cols.length;i++)if(e.cols[i].name===t){e.cols[i].hide=!0;break}e.update()},n.show=function(t){for(i=0;i<e.cols.length;i++)if(e.cols[i].name===t){e.cols[i].hide=!1;break}e.update()},e.findNodes=function(t,n){for(var i=0;i<t.attributes.length;i++){var a=t.attributes[i].name,o=t.attributes[i].value;if("if"===a||"show"===a||"hide"===a){t.removeAttribute(a);var r=riot.util.tmpl(o,n);"hide"==a&&(r=!r),t.style.display=r?"":"none"}if("each"===a){t.removeAttribute(a);var s=riot.util.tmpl(o,n),l=t.parentNode;if(s&&utils.isArray(s)){var u=document.createComment("riot placeholder"),c=document.createDocumentFragment();for(l.insertBefore(u,t),i=0;i<s.length;i++){var d=document.createElement("tmp");d.innerHTML=riot.util.tmpl(t.outerHTML,s[i]),c.appendChild(d.firstChild)}l.removeChild(t),l.insertBefore(c,u)}}}if(t.hasChildNodes())for(var p=t.children,i=0;i<p.length;i++){var f=p.item(i);e.findNodes(f,n)}},this.drawcell=function(t,n,a){if(a.attrs.length)for(i in a.attrs)"function"!=typeof a.attrs[i]&&(a.attrs[i].name&&"class"!==a.attrs[i].name?n.root.setAttribute(a.attrs[i].name,a.attrs[i].value):a.attrs[i].name&&"class"==a.attrs[i].name&&utils.addClass(n.root,a.attrs[i].value));if(!a.inner)return t[a.name];var o=a.inner.replace(/&lt;%=/g,"{").replace(/%&gt;/g,"}").replace(/%>/g,"}").replace(/<%=/g,"{");for(i in iToolkit.tableExtend)"function"==typeof iToolkit.tableExtend[i]?t[i]=iToolkit.tableExtend[i].bind(t):t[i]=iToolkit.tableExtend[i];for(i in t)n[i]=t[i];n.root.innerHTML=o,e.findNodes(n.root,n),n.root.innerHTML=riot.util.tmpl(n.root.innerHTML,t)}.bind(this)}),riot.tag("tree",'<div class="tree-item-wrap" each="{ data }" onselectstart="return false" ondragstart="return false"> <input type="checkbox" onchange="{ parent.checkHandle }" if="{ parent.rootConfig.showCheck }"> <i class="{ tree-item-arrow: true, open: opened, empty: !children }" onclick="{ parent.toggle }"></i> <div onclick="{ parent.leftClick }" style="display: inline;"> <i class="tree-item-icon" if="{ !parent.children }"></i> <i class="tree-item-icon" if="{ parent.children }"></i> <div class="{ tree-item-name : true }" title="{ name }">{ name }</div>  </div> <ul class="tree-child-wrap" if="{ children }"> <tree data="{ children }" if="{ children }"></tree> </ul> </div>',function(t){var e=this;if(e.config=e.opts.opts||e.opts,e.dataHandle=function(t,n,i){var t=t||[],a=n||"id",o=i||"pid",r={};t.forEach(function(t){e.config.name&&(t.name=t[e.config.name]),r[t[a]]=t});var s=[];return t.forEach(function(t){var e=r[t[o]];e?(e.children||(e.children=[]),e.children.push(t)):s.push(t)}),s},e.config.handleData){var n=e.dataHandle(e.config.data);e.data=n}else e.data=e.config.data;e.config.root?e.rootConfig=e.config:e.rootConfig=e.parent.rootConfig||e.parent.parent.rootConfig,this.leftClick=function(t){if(e.rootConfig.folder&&t.item.children)t.item.opened===!0?t.item.opened=!1:t.item.opened=!0;else{var n=e.rootConfig.onLeftClick;n&&n(t.item,t.target)}}.bind(this),this.checkHandle=function(t){var n=e.rootConfig.onCheck,i=e.rootConfig.onUnCheck;n&&t.target.checked&&n(t.item,t.target),i&&!t.target.checked&&i(t.item,t.target)}.bind(this),this.toggle=function(t){t.item.opened===!0?t.item.opened=!1:t.item.opened=!0}.bind(this)});